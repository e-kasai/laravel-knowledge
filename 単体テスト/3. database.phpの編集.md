
---
####   config/database.phpの役割

- 接続名ごとの**中身（driver, host, user, pass, DB名など）**が定義されている
- `.env` /`.env.testing` で指定された `DB_CONNECTION` の名前に応じて、どの接続設定を使うか Laravel がここを見に来る。

#### 作業の目的

- `.env.testing`でテスト用DB環境が指定されたときにconfigファイルを参照するのでテスト用DBの設定をする

---
#### 手順

- configディレクトリの中のdatabase.phpを開き、mysqlの配列部分をコピーして新たにmysql_testを作成
- 配列の中のdatabase、username、passwordを以下に変更

| 項目       | 変更前                          | 変更後      | 用途                     |
| ---------- | ------------------------------- | ----------- | ------------------------ |
| database   | env('DB_DATABASE', 'forge')     | 'demo_test' | テスト用DBを指定するため |
| username   | env('DB_USERNAME', 'forge')     | 'root'      | root権限で操作するため   |
| password   | env('DB_PASSWORD', '')          | 'root'      | rootユーザーのパスワード |

---
```php
// config/database.php
'mysql' => [
    // 中略
],

'mysql_test' => [
    'driver' => 'mysql',
    'url' => env('DATABASE_URL'),
    'host' => env('DB_HOST', '127.0.0.1'),
    'port' => env('DB_PORT', '3306'),
    'database' => 'demo_test',  //here
    'username' => 'root',       //here
    'password' => 'root',       //here
    'unix_socket' => env('DB_SOCKET', ''),
    'charset' => 'utf8mb4',
    'collation' => 'utf8mb4_unicode_ci',
    'prefix' => '',
    'prefix_indexes' => true,
    'strict' => true,
    'engine' => null,
    'options' => extension_loaded('pdo_mysql') ? array_filter([
        PDO::MYSQL_ATTR_SSL_CA => env('MYSQL_ATTR_SSL_CA'),
    ]) : [],
],
```