
---

#### assert
`$this->assertDatabaseHas($table, $data)`

- 指定テーブルに「この条件に合うレコードが存在する」ことを確認できる → 購入データや SOLD 状態を確認するのに使用。

---

#### ex

```php
// 購入完了テスト
    public function test_purchase_completes_and_transaction_data_stored_to_the_database()
    {
        // 出品者・購入者をファクトリで作成
        $seller = User::factory()->create();
        $buyer  = User::factory()->create();

        // 商品を作成
        $item = Item::factory()->create([
            'seller_id' => $seller->id,
            'image_path' => 'https://example.com/test.jpg',
            'is_sold'   => false,
        ]);

        // 購入者プロフィール
        Profile::factory()->create([
            'user_id'     => $buyer->id,
            'postal_code' => '123-4567',
            'address'     => '東京都テスト区1-2-3',
        ]);

        // loginユーザーとして購入
        $this->actingAs($buyer);
        $response = $this->post(route('purchase.item', $item), [
            'payment_method' => 1,
            'purchase_price' => $item->price,
            'shipping_postal_code' => '123-4567',
            'shipping_address' => '東京都テスト区1-2-3',
        ]);


        // 期待：購入完了 DBに購入レコードが追加される
        $this->assertDatabaseHas('transactions', [
            'item_id'  => $item->id,
            'buyer_id' => $buyer->id,
            'payment_method' => 1,
            'purchase_price' => $item->price,
            'shipping_postal_code' => '123-4567',
            'shipping_address' => '東京都テスト区1-2-3',
        ]);
    }
```