
---
#### phpunitの役割
- PHPUnit（テストランナー）の起動ルールを決めてるファイル
- 「テスト環境で起動するための設定」　を書く場所


#### 目的: PHPUnitがテスト環境を正しくブートするよう設定

phpunit.xml の中に

```php
<env name="APP_ENV" value="testing"/>
```
みたいな記述を入れると、テスト実行時は必ず「テスト環境（testing）」として起動する。

- これによってLaravelが `.env.testing` を読み込むようになり、2と3で作った設定が有効化される。
- これをやらないと、テスト時に普通の `.env` が読み込んで本番DBを壊すリスクがある

---

#### 手順
- プロジェクトの直下の`phpunit.xml`を開き、`DB_CONNECTION`と`DB_DATABASE`を以下のように変更

```php
// phpunit.xml

<?xml version="1.0" encoding="UTF-8"?>
<phpunit xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="./vendor/phpunit/phpunit/phpunit.xsd"
bootstrap="vendor/autoload.php"
colors="true"
>
<testsuites>
    <testsuite name="Unit">
        <directory suffix="Test.php">./tests/Unit</directory>
    </testsuite>
    <testsuite name="Feature">
        <directory suffix="Test.php">./tests/Feature</directory>
    </testsuite>
</testsuites>
<coverage processUncoveredFiles="true">
    <include>
        <directory suffix=".php">./app</directory>
    </include>
</coverage>
    <php>
        <server name="APP_ENV" value="testing"/>
        <server name="BCRYPT_ROUNDS" value="4"/>
        <server name="CACHE_DRIVER" value="array"/>
-         <!-- <server name="DB_CONNECTION" value="sqlite"/> -->
-         <!-- <server name="DB_DATABASE" value=":memory:"/> -->
+         <server name="DB_CONNECTION" value="mysql_test"/>   //database.phpで指定した接続先名mysql_testを指定
+         <server name="DB_DATABASE" value="demo_test"/>      //テスト用のデータベースとして作成したDB名を指定
        <server name="MAIL_MAILER" value="array"/>
        <server name="QUEUE_CONNECTION" value="sync"/>
        <server name="SESSION_DRIVER" value="array"/>
        <server name="TELESCOPE_ENABLED" value="false"/>
    </php>
</phpunit>
```