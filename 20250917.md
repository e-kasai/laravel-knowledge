
---

まとめ：今回のポイント
1. 認証メール送信の仕組み

認証メールは Registered イベント がトリガー。

これを受けて SendEmailVerificationNotification リスナー が走り、VerifyEmail 通知が送られる。

Fortify標準の /register を使えば自動で event(new Registered($user)) が呼ばれる。

2. 今回の構成では「イベント発火」が抜けていた

EKさんは バリデーションやルートを自作していて、Fortifyの自動ルートは無効化していた。

その結果、登録処理は CreateNewUser でユーザー作成まではできたけど、
Registered イベントを投げる処理が存在しなかった。

だから通知（認証メール）が送られなかった。

3. 解決方法

RegisterController@store 内で明示的に

use Illuminate\Auth\Events\Registered;
event(new Registered($user));


を呼ぶようにした。

これで「登録 → イベント発火 → リスナー → 認証メール送信」という標準ルートに戻った。

4. 補足ポイント

use 宣言忘れで App\Http\Controllers\Registered を探しに行って 500 が出た → これもLaravelあるある。

User モデルが MustVerifyEmail を実装 ＋ use Notifiable; を持っていることも前提条件。