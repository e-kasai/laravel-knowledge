
---
#### code例

```php
$item->favorites()->detach(auth()->id());
```
 ---

#### 挙動

これは「今ログイン中のユーザーの、この商品に対するいいね」を削除する処理

例：商品Aに

ユーザー1がいいね
ユーザー2がいいね
ユーザー3がいいね

という状態だったとする。

ここでユーザー2が「いいね解除」ボタンを押すと、`detach(auth()->id())` が呼ばれる。
すると `ユーザー2のレコードだけ削除` される。
ユーザー1・ユーザー3のいいねは残る。

---

#### 中間テーブルのイメージ

** 商品（$item）とユーザーは 多対多 の関係。
→ 中間テーブル favorites に「どのユーザーがどの商品にいいねしたか」を記録してる。 **

detach()すると、中間テーブルはこうなる

`detach前`

| id | item_id | user_id | created_at |
|----|---------|---------|------------|
| 1  | 10      | 1       | 2025-09-05 |
| 2  | 10      | 2       | 2025-09-05 |
| 3  | 10      | 3       | 2025-09-05 |

` detach後（ユーザー2のいいね解除）`

| id | item_id | user_id | created_at |
|----|---------|---------|------------|
| 1  | 10      | 1       | 2025-09-05 |
| 3  | 10      | 3       | 2025-09-05 |

