### **特徴**

- **リレーションの件数を一括で取得**
    
- 結果をモデルに `カラム名_count` として追加する
    

### **例：商品と一緒に件数をまとめて取得**

```php
// 一覧画面で「いいね数」「コメント数」をまとめて取得 
$items = Item::withCount(['favorites', 'comments'])->get();  

foreach ($items as $item) {     
	echo $item->favorites_count; // 各商品のいいね件数     
	echo $item->comments_count;  // 各商品のコメント件数 
}
```


---

**用途**

- 一覧ページやランキングなど、**複数レコードの件数を一括取得**したいとき
`具体例`
一覧画面（複数商品を一度に表示）で商品ごとに ->count() を呼んだら商品数だけSQL発行されて非効率
50個あったら50クエリにもなるので`withCount`でまとめてとる方がいい

---   

**メリット**

- SQLをまとめて1回で実行
- **パフォーマンスが良い**（N+1回避）

---

**デメリット**

- JOINを使うため、テーブルが大きくなるとクエリが重くなることがある