
---

「同じデータがあるか探して、なければ新しく作る」

#### 使い方例
```php
Attendance::firstOrCreate([
    'user_id' => auth()->id(),
    'date' => today(),
]);
```

🧠 処理の流れ（中で何をしてるか）

探す（first）
user_id と date が一致するレコードを探す。
見つかったら、そのレコードを返して処理終了。

なければ作る（create）
見つからなければ、同じキーで新しいレコードをDBに登録する。
そして、その新しいモデルを返す。



#### 具体例：出勤ボタンは１回までしか押せないよう仕様にしたい

たとえば「user_id=5 の人が 2025-10-12 に出勤ボタンを押した」とします。
```php
Attendance::firstOrCreate([
    'user_id' => 5,
    'date' => '2025-10-12',
]);
```
もしその日すでに登録があれば → それを返す（新規登録しない）
なければ → 新しく insert して返す

---
💬 よくある誤解

firstOrCreate() は 「更新」ではない。
既存データを上書きしたい場合は updateOrCreate() を使います。

| 項目 | firstOrCreate() | updateOrCreate() |
|------|------------------|------------------|
| 目的 | なければ作る（あるならそのまま使う） | なければ作る、あれば更新する |
| 既存データありの場合 | 既存データを返すだけ（更新しない） | 該当データを上書き（更新） |
| 既存データなしの場合 | 新規作成する | 新規作成する |
| 使い方（第2引数） | 新規作成時の初期値 | 更新または新規作成時の値 |
| よく使う場面 | 「1日1回まで登録」など重複防止 | 「プロフィール更新」「設定の保存」など |


