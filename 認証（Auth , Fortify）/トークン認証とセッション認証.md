
---

# token認証とは

ログイン時にサーバーから発行されたトークンをクライアント側が保持して、
APIリクエストのたびに Authorizationヘッダに付けて送信し、サーバー側でそのトークンを検証する方式

1. クライアント：ログインAPIでサーバーから発行されたトークンをもらう
2. クライアント：トークンを保存する（メモリ / localStorage など）
3. クライアント：APIを呼ぶたびにAuthorizationヘッダにtoken を付けて送る
```
// HTTPリクエストには「本文（body）」とは別にヘッダという付加情報がありそこにこう書く
Authorization: Bearer xxxxx
```
4. サーバー：トークンを見て検証


# session認証とは

1. クライアント（ブラウザ）: ID・パスワードを送ってログイン
2. サーバー（Laravel）: OKなら セッションを作る → セッションIDを発行

イメージ↓
```
// セッションID自体は意味を持たないランダムな文字列。
セッションID: a8f3...
↓
// セッション情報
{
  user_id: 12,
  is_login: true,
  role: admin
}
```

3. ブラウザ : セッションIDを Cookieとして保存
4. ブラウザ: 　Cookieを自動で送る
5. サーバー： セッションIDにより検証

## point
sessionをブラウザが保持するので、CSRF対策のために@csrfが必要



# 違い一覧
| 項目 | セッション認証 | トークン認証 |
|---|---|---|
| ログイン状態 | サーバーが保持 | サーバーは保持しない |
| 送るもの | Cookie（自動） | トークン（明示的） |
| CSRF対策 | 必要 | 多くの場合不要 |
| 主な用途 | Blade / 従来Web | API / SPA |

# まとめ
セッション認証はサーバー側で状態を保持する方式で、Cookieを使うためCSRF対策が必要になる。
トークン認証はクライアントがトークンを明示的に送る方式です。